var Et=Object.defineProperty;var kt=(t,e,n)=>e in t?Et(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var b=(t,e,n)=>(kt(t,typeof e!="symbol"?e+"":e,n),n);function P(){}const Z=t=>t;function Ot(t,e){for(const n in e)t[n]=e[n];return t}function dt(t){return t()}function ut(){return Object.create(null)}function C(t){t.forEach(dt)}function D(t){return typeof t=="function"}function Qt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Pt(t){return Object.keys(t).length===0}function Xt(t,e,n,s){if(t){const i=ht(t,e,n,s);return t[0](i)}}function ht(t,e,n,s){return t[1]&&s?Ot(n.ctx.slice(),t[1](s(e))):n.ctx}function Yt(t,e,n,s){if(t[2]&&s){const i=t[2](s(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(e.dirty.length,i.length);for(let c=0;c<o;c+=1)r[c]=e.dirty[c]|i[c];return r}return e.dirty|i}return e.dirty}function Zt(t,e,n,s,i,r){if(i){const o=ht(e,n,s,r);t.p(o,i)}}function te(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function ee(t){return t??""}function ne(t){return t&&D(t.destroy)?t.destroy:P}function se(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const _t=typeof window<"u";let tt=_t?()=>window.performance.now():()=>Date.now(),et=_t?t=>requestAnimationFrame(t):P;const L=new Set;function pt(t){L.forEach(e=>{e.c(t)||(L.delete(e),e.f())}),L.size!==0&&et(pt)}function nt(t){let e;return L.size===0&&et(pt),{promise:new Promise(n=>{L.add(e={c:t,f:n})}),abort(){L.delete(e)}}}const $t=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;class I{constructor(e){b(this,"_listeners","WeakMap"in $t?new WeakMap:void 0);b(this,"_observer");b(this,"options");this.options=e}observe(e,n){return this._listeners.set(e,n),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(e=>{var n;for(const s of e)I.entries.set(s.target,s),(n=this._listeners.get(s.target))==null||n(s)}))}}I.entries="WeakMap"in $t?new WeakMap:void 0;function Ct(t,e){t.appendChild(e)}function re(t,e,n){const s=st(t);if(!s.getElementById(e)){const i=it("style");i.id=e,i.textContent=n,gt(s,i)}}function st(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function St(t){const e=it("style");return e.textContent="/* empty */",gt(st(t),e),e.sheet}function gt(t,e){return Ct(t.head||t,e),e.sheet}function At(t,e,n){t.insertBefore(e,n||null)}function rt(t){t.parentNode&&t.parentNode.removeChild(t)}function ie(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function it(t){return document.createElement(t)}function oe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function mt(t){return document.createTextNode(t)}function ce(){return mt(" ")}function ae(){return mt("")}function ue(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function le(t){return function(e){return e.preventDefault(),t.call(this,e)}}function fe(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function yt(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function de(t,e,n){const s=e.toLowerCase();s in t?t[s]=typeof t[s]=="boolean"&&n===""?!0:n:e in t?t[e]=typeof t[e]=="boolean"&&n===""?!0:n:yt(t,e,n)}function Mt(t){return Array.from(t.childNodes)}function he(t,e){e=""+e,t.data!==e&&(t.data=e)}function _e(t,e){t.value=e??""}function pe(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}const $e=new I({box:"content-box"}),ge=new I({box:"border-box"});function me(t,e,n){t.classList.toggle(e,!!n)}function bt(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}function jt(t){const e={};return t.childNodes.forEach(n=>{e[n.slot||"default"]=!0}),e}const J=new Map;let V=0;function Lt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Tt(t,e){const n={stylesheet:St(e),rules:{}};return J.set(t,n),n}function U(t,e,n,s,i,r,o,c=0){const l=16.666/s;let a=`{
`;for(let g=0;g<=1;g+=l){const m=e+(n-e)*r(g);a+=g*100+`%{${o(m,1-m)}}
`}const h=a+`100% {${o(n,1-n)}}
}`,f=`__svelte_${Lt(h)}_${c}`,_=st(t),{stylesheet:p,rules:u}=J.get(_)||Tt(_,t);u[f]||(u[f]=!0,p.insertRule(`@keyframes ${f} ${h}`,p.cssRules.length));const $=t.style.animation||"";return t.style.animation=`${$?`${$}, `:""}${f} ${s}ms linear ${i}ms 1 both`,V+=1,f}function K(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=n.length-s.length;i&&(t.style.animation=s.join(", "),V-=i,V||Rt())}function Rt(){et(()=>{V||(J.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&rt(e)}),J.clear())})}let z;function B(t){z=t}function ot(){if(!z)throw new Error("Function called outside component initialization");return z}function ye(t){ot().$$.on_mount.push(t)}function be(t){ot().$$.on_destroy.push(t)}function we(){const t=ot();return(e,n,{cancelable:s=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=bt(e,n,{cancelable:s});return i.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}function xe(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const j=[],lt=[];let T=[];const Q=[],Dt=Promise.resolve();let X=!1;function Nt(){X||(X=!0,Dt.then(wt))}function R(t){T.push(t)}function ve(t){Q.push(t)}const G=new Set;let M=0;function wt(){if(M!==0)return;const t=z;do{try{for(;M<j.length;){const e=j[M];M++,B(e),qt(e.$$)}}catch(e){throw j.length=0,M=0,e}for(B(null),j.length=0,M=0;lt.length;)lt.pop()();for(let e=0;e<T.length;e+=1){const n=T[e];G.has(n)||(G.add(n),n())}T.length=0}while(j.length);for(;Q.length;)Q.pop()();X=!1,G.clear(),B(t)}function qt(t){if(t.fragment!==null){t.update(),C(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}function Bt(t){const e=[],n=[];T.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),T=e}let q;function ct(){return q||(q=Promise.resolve(),q.then(()=>{q=null})),q}function A(t,e,n){t.dispatchEvent(bt(`${e?"intro":"outro"}${n}`))}const F=new Set;let k;function Ee(){k={r:0,c:[],p:k}}function ke(){k.r||C(k.c),k=k.p}function xt(t,e){t&&t.i&&(F.delete(t),t.i(e))}function zt(t,e,n,s){if(t&&t.o){if(F.has(t))return;F.add(t),k.c.push(()=>{F.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}const at={duration:0};function Oe(t,e,n){const s={direction:"in"};let i=e(t,n,s),r=!1,o,c,l=0;function a(){o&&K(t,o)}function h(){const{delay:_=0,duration:p=300,easing:u=Z,tick:$=P,css:g}=i||at;g&&(o=U(t,0,1,p,_,u,g,l++)),$(0,1);const m=tt()+_,w=m+p;c&&c.abort(),r=!0,R(()=>A(t,!0,"start")),c=nt(x=>{if(r){if(x>=w)return $(1,0),A(t,!0,"end"),a(),r=!1;if(x>=m){const O=u((x-m)/p);$(O,1-O)}}return r})}let f=!1;return{start(){f||(f=!0,K(t),D(i)?(i=i(s),ct().then(h)):h())},invalidate(){f=!1},end(){r&&(a(),r=!1)}}}function Pe(t,e,n){const s={direction:"out"};let i=e(t,n,s),r=!0,o;const c=k;c.r+=1;let l;function a(){const{delay:h=0,duration:f=300,easing:_=Z,tick:p=P,css:u}=i||at;u&&(o=U(t,1,0,f,h,_,u));const $=tt()+h,g=$+f;R(()=>A(t,!1,"start")),"inert"in t&&(l=t.inert,t.inert=!0),nt(m=>{if(r){if(m>=g)return p(0,1),A(t,!1,"end"),--c.r||C(c.c),!1;if(m>=$){const w=_((m-$)/f);p(1-w,w)}}return r})}return D(i)?ct().then(()=>{i=i(s),a()}):a(),{end(h){h&&"inert"in t&&(t.inert=l),h&&i.tick&&i.tick(1,0),r&&(o&&K(t,o),r=!1)}}}function Ce(t,e,n,s){let r=e(t,n,{direction:"both"}),o=s?0:1,c=null,l=null,a=null,h;function f(){a&&K(t,a)}function _(u,$){const g=u.b-o;return $*=Math.abs(g),{a:o,b:u.b,d:g,duration:$,start:u.start,end:u.start+$,group:u.group}}function p(u){const{delay:$=0,duration:g=300,easing:m=Z,tick:w=P,css:x}=r||at,O={start:tt()+$,b:u};u||(O.group=k,k.r+=1),"inert"in t&&(u?h!==void 0&&(t.inert=h):(h=t.inert,t.inert=!0)),c||l?l=O:(x&&(f(),a=U(t,o,u,g,$,m,x)),u&&w(0,1),c=_(O,g),R(()=>A(t,u,"start")),nt(S=>{if(l&&S>l.start&&(c=_(l,g),l=null,A(t,c.b,"start"),x&&(f(),a=U(t,o,c.b,c.duration,0,m,r.css))),c){if(S>=c.end)w(o=c.b,1-o),A(t,c.b,"end"),l||(c.b?f():--c.group.r||C(c.group.c)),c=null;else if(S>=c.start){const N=S-c.start;o=c.a+c.d*m(N/c.duration),w(o,1-o)}}return!!(c||l)}))}return{run(u){D(r)?ct().then(()=>{r=r({direction:u?"in":"out"}),p(u)}):p(u)},end(){f(),c=l=null}}}function Se(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ae(t,e){t.d(1),e.delete(t.key)}function Me(t,e){zt(t,1,1,()=>{e.delete(t.key)})}function je(t,e,n,s,i,r,o,c,l,a,h,f){let _=t.length,p=r.length,u=_;const $={};for(;u--;)$[t[u].key]=u;const g=[],m=new Map,w=new Map,x=[];for(u=p;u--;){const y=f(i,r,u),v=n(y);let E=o.get(v);E?s&&x.push(()=>E.p(y,e)):(E=a(v,y),E.c()),m.set(v,g[u]=E),v in $&&w.set(v,Math.abs(u-$[v]))}const O=new Set,S=new Set;function N(y){xt(y,1),y.m(c,h),o.set(y.key,y),h=y.first,p--}for(;_&&p;){const y=g[p-1],v=t[_-1],E=y.key,W=v.key;y===v?(h=y.first,_--,p--):m.has(W)?!o.has(E)||O.has(E)?N(y):S.has(W)?_--:w.get(E)>w.get(W)?(S.add(E),N(y)):(O.add(W),_--):(l(v,o),_--)}for(;_--;){const y=t[_];m.has(y.key)||l(y,o)}for(;p;)N(g[p-1]);return C(x),g}function Le(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function Te(t){t&&t.c()}function It(t,e,n){const{fragment:s,after_update:i}=t.$$;s&&s.m(e,n),R(()=>{const r=t.$$.on_mount.map(dt).filter(D);t.$$.on_destroy?t.$$.on_destroy.push(...r):C(r),t.$$.on_mount=[]}),i.forEach(R)}function Wt(t,e){const n=t.$$;n.fragment!==null&&(Bt(n.after_update),C(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ft(t,e){t.$$.dirty[0]===-1&&(j.push(t),Nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Re(t,e,n,s,i,r,o=null,c=[-1]){const l=z;B(t);const a=t.$$={fragment:null,ctx:[],props:r,update:P,not_equal:i,bound:ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:ut(),dirty:c,skip_bound:!1,root:e.target||l.$$.root};o&&o(a.root);let h=!1;if(a.ctx=n?n(t,e.props||{},(f,_,...p)=>{const u=p.length?p[0]:_;return a.ctx&&i(a.ctx[f],a.ctx[f]=u)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](u),h&&Ft(t,f)),_}):[],a.update(),h=!0,C(a.before_update),a.fragment=s?s(a.ctx):!1,e.target){if(e.hydrate){const f=Mt(e.target);a.fragment&&a.fragment.l(f),f.forEach(rt)}else a.fragment&&a.fragment.c();e.intro&&xt(t.$$.fragment),It(t,e.target,e.anchor),wt()}B(l)}let vt;typeof HTMLElement=="function"&&(vt=class extends HTMLElement{constructor(e,n,s){super();b(this,"$$ctor");b(this,"$$s");b(this,"$$c");b(this,"$$cn",!1);b(this,"$$d",{});b(this,"$$r",!1);b(this,"$$p_d",{});b(this,"$$l",{});b(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=n,s&&this.attachShadow({mode:"open"})}addEventListener(e,n,s){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(n),this.$$c){const i=this.$$c.$on(e,n);this.$$l_u.set(n,i)}super.addEventListener(e,n,s)}removeEventListener(e,n,s){if(super.removeEventListener(e,n,s),this.$$c){const i=this.$$l_u.get(n);i&&(i(),this.$$l_u.delete(n))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(r){return()=>{let o;return{c:function(){o=it("slot"),r!=="default"&&yt(o,"name",r)},m:function(a,h){At(a,o,h)},d:function(a){a&&rt(o)}}}};if(await Promise.resolve(),!this.$$cn)return;const n={},s=jt(this);for(const r of this.$$s)r in s&&(n[r]=[e(r)]);for(const r of this.attributes){const o=this.$$g_p(r.name);o in this.$$d||(this.$$d[o]=H(o,r.value,this.$$p_d,"toProp"))}for(const r in this.$$p_d)!(r in this.$$d)&&this[r]!==void 0&&(this.$$d[r]=this[r],delete this[r]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});const i=()=>{this.$$r=!0;for(const r in this.$$p_d)if(this.$$d[r]=this.$$c.$$.ctx[this.$$c.$$.props[r]],this.$$p_d[r].reflect){const o=H(r,this.$$d[r],this.$$p_d,"toAttribute");o==null?this.removeAttribute(this.$$p_d[r].attribute||r):this.setAttribute(this.$$p_d[r].attribute||r,o)}this.$$r=!1};this.$$c.$$.after_update.push(i),i();for(const r in this.$$l)for(const o of this.$$l[r]){const c=this.$$c.$on(r,o);this.$$l_u.set(o,c)}this.$$l={}}}attributeChangedCallback(e,n,s){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=H(e,s,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(n=>this.$$p_d[n].attribute===e||!this.$$p_d[n].attribute&&n.toLowerCase()===e)||e}});function H(t,e,n,s){var r;const i=(r=n[t])==null?void 0:r.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!s||!n[t])return e;if(s==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function De(t,e,n,s,i,r){let o=class extends vt{constructor(){super(t,n,i),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(c=>(e[c].attribute||c).toLowerCase())}};return Object.keys(e).forEach(c=>{Object.defineProperty(o.prototype,c,{get(){return this.$$c&&c in this.$$c?this.$$c[c]:this.$$d[c]},set(l){var a;l=H(c,l,e),this.$$d[c]=l,(a=this.$$c)==null||a.$set({[c]:l})}})}),s.forEach(c=>{Object.defineProperty(o.prototype,c,{get(){var l;return(l=this.$$c)==null?void 0:l[c]}})}),r&&(o=r(o)),t.element=o,o}class Ne{constructor(){b(this,"$$");b(this,"$$set")}$destroy(){Wt(this,1),this.$destroy=P}$on(e,n){if(!D(n))return P;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(e){this.$$set&&!Pt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ht="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ht);class Jt{constructor(){b(this,"subcribers");this.subcribers=new Map}emit(e,n){var s;(s=this.subcribers.get(e))==null||s.forEach(i=>{i(n)})}on(e,n){const s=this.subcribers.get(e)||[];s.push(n),this.subcribers.set(e,s)}}const Vt=new Jt;function Ut(t){try{t.message=="Extension context invalidated."&&Vt.emit("terminated")}catch{}return Promise.reject(t)}function d(t){try{return chrome.runtime.sendMessage(t).catch(e=>Promise.reject(e))}catch(e){return console.log({error:e}),Promise.reject(e)}}function qe(){return d({type:"ping"}).catch(t=>Ut(t))}function Be(){return d({type:"close_popups"})}function ze(){return d({type:"get_language"}).then(t=>t&&t.lang?t.lang.substring(0,2).toLowerCase():"auto").catch(()=>"un")}function Ie(t){return d({type:"report_small_count",name:"PopupOpened",value:t})}function We(t){return d({type:"report_small_count",name:"TooltipAction",value:t})}function Fe(t){return d({type:"report_medium_count",name:"TranslationPopupAction",value:t})}function He(t){return d({type:"report_medium_count",name:"TranslationInlineOpened",value:t})}function Je(t,e){return d({type:"report_small_count",name:t,value:e})}function Ve(t){return d({type:"report_medium_count",name:"TranslationPopupOpened",value:t})}function Ue(t){const e={timestamp_ms:t,page_url:window.location.href,type:"dictionary"};return d({type:"report_custom_data",value:e})}function Ke(t,e){return d({type:"report_time",name:t,value:e})}function Ge(t){return d({type:"get_exchange_rate",money:t})}function Qe(t){return d({type:"report_small_count",name:"ConversionAction",value:t})}function Xe(t){return d({type:"report_small_count",name:"ConversionOpened",value:t})}function Ye(t,e){return d({type:"report_custom_data",value:{timestamp_ms:t,page_url:window.location.href,type:"converter:"+e}})}function Ze(t){return d({type:"report_conversion_shown",data:t})}function tn(t){return d({type:"on_selection",data:t}).then(e=>{if(e&&!e.error)return e;throw e})}function en(t){return d({type:"report_onboarding_click",data:{click_type:t}})}function nn(t){return d({type:"report_small_count",name:"PopupAction",value:t})}function sn(){return d({type:"stop_speaking"})}function rn(t){return d({type:"speak",word:t.word,lang:t.lang,gender:t.gender})}function on(){return d({type:"open_options"})}function cn(){return d({type:"disable_menu"})}function an(){return d({type:"enable_menu"})}function un(t){return d({type:"emit_frame_action",message:t})}function ln(t){return d({type:"open_translator",width:560,height:500,...t})}function fn(t){return d({type:"open_external_dict",...t})}const Kt=["ja","zh","ko"];function dn(t,e){return chrome.i18n.detectLanguage(t).then(async n=>{if(n.languages.length<=1||t==e)return{isReliable:n.isReliable,detected:ft(n.languages)};const i=(await chrome.i18n.detectLanguage(e)).languages.filter(r=>n.languages.findIndex(o=>o.language==r.language)>-1);return{isReliable:!0,detected:ft(i)}}).then(n=>(n.detected&&Kt.includes(n.detected.language)&&e.match(/^[a-z]+$/i)&&(n.detected.language="en",e.match(/\s/)&&(n.isReliable=!1)),n))}function ft(t){return t.reduce((e,n)=>n.percentage>e.percentage?n:e,t[0])}function hn(){return d({type:"get_available_voice"}).then(t=>t||[])}let Y;try{Y=chrome.i18n.getMessage||(()=>"")}catch{Y=()=>""}const _n=(t,e)=>{try{return Y(t,e)}catch{return t}};export{Oe as $,xt as A,zt as B,ke as C,Wt as D,Xe as E,Ye as F,Ze as G,ye as H,be as I,ae as J,Ee as K,fe as L,le as M,C as N,en as O,je as P,Ae as Q,fn as R,Ne as S,nn as T,ee as U,on as V,Xt as W,Zt as X,te as Y,Yt as Z,R as _,yt as a,Pe as a0,D as a1,ge as a2,rn as a3,sn as a4,Ie as a5,Ke as a6,lt as a7,I as a8,$e as a9,Ve as aa,We as ab,de as ac,Je as ad,Ue as ae,ze as af,He as ag,tn as ah,ln as ai,cn as aj,dn as ak,Be as al,an as am,un as an,Vt as ao,qe as ap,ne as aq,xe as ar,_e as as,Le as at,ve as au,Fe as av,hn as aw,se as ax,Ce as ay,Me as az,me as b,De as c,pe as d,it as e,wt as f,At as g,Ct as h,Re as i,rt as j,Ge as k,re as l,_n as m,P as n,Se as o,ce as p,he as q,ie as r,Qt as s,mt as t,we as u,ue as v,Qe as w,oe as x,Te as y,It as z};
